<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ Roll and Move Game</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/board.css">
    <link rel="stylesheet" href="styles/ui.css">
</head>
<body>
    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen active">
        <div class="menu-container">
            <h1>üé≤ Roll and Move Game</h1>
            
            <div class="player-setup">
                <div class="input-group">
                    <label for="playerName">Player Name:</label>
                    <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
                </div>
                
                <div class="character-selection">
                    <h3>Choose Your Character:</h3>
                    <div class="character-grid">
                        <div class="character-card" data-character="warrior">
                            <div class="character-icon">‚öîÔ∏è</div>
                            <div class="character-name">Warrior</div>
                        </div>
                        <div class="character-card" data-character="mage">
                            <div class="character-icon">üßô‚Äç‚ôÇÔ∏è</div>
                            <div class="character-name">Mage</div>
                        </div>
                        <div class="character-card" data-character="rogue">
                            <div class="character-icon">üó°Ô∏è</div>
                            <div class="character-name">Rogue</div>
                        </div>
                        <div class="character-card" data-character="archer">
                            <div class="character-icon">üèπ</div>
                            <div class="character-name">Archer</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="game-mode-selection">
                <h3>Select Game Mode:</h3>
                <button id="singlePlayerBtn" class="btn btn-primary">Single Player</button>
                <button id="multiplayerBtn" class="btn btn-primary">Multiplayer</button>
                <button id="howToPlayBtn" class="btn btn-secondary">How to Play</button>
            </div>
        </div>
    </div>

    <!-- Multiplayer Lobby Screen -->
    <div id="multiplayerLobby" class="screen">
        <div class="lobby-container">
            <h2>Multiplayer Lobby</h2>
            
            <div class="lobby-options">
                <button id="hostGameBtn" class="btn btn-primary">Host New Game</button>
                <div class="join-game">
                    <input type="text" id="roomIdInput" placeholder="Enter Room ID">
                    <button id="joinGameBtn" class="btn btn-primary">Join Game</button>
                </div>
                <button id="backToMenuBtn" class="btn btn-secondary">Back to Menu</button>
            </div>

            <div id="roomInfo" class="room-info hidden">
                <h3>Room: <span id="currentRoomId"></span></h3>
                <div class="players-list">
                    <h4>Players:</h4>
                    <div id="playersList"></div>
                </div>
                <button id="readyBtn" class="btn btn-success">Ready</button>
                <button id="leaveRoomBtn" class="btn btn-danger">Leave Room</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <!-- Game Info Panel -->
            <div class="game-info">
                <div class="race-status">
                    <h3>üèÅ Real-Time Race</h3>
                    <div class="race-info">Everyone can roll dice simultaneously!</div>
                </div>
                
                <div class="players-status">
                    <h4>Players:</h4>
                    <div id="playersStatus"></div>
                </div>
            </div>

            <!-- Game Board -->
            <div class="board-container">
                <div id="gameBoard" class="game-board">
                    <!-- Board squares will be generated by JavaScript -->
                </div>
            </div>

            <!-- Game Controls -->
            <div class="game-controls">
                <div class="dice-section">
                    <div class="dice-container">
                        <div id="dice1" class="diceA">?</div>
                        <div id="dice2" class="diceA">?</div>
                    </div>
                    <button id="rollDiceBtn" class="btn btn-primary btn-large">Roll Dice</button>
                </div>
                
                <div class="game-log">
                    <h4>Game Log:</h4>
                    <div id="gameLog" class="log-container"></div>
                </div>
                
                <div class="chat-section">
                    <h4>Chat:</h4>
                    <div id="chatMessages" class="chat-messages"></div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Type a message..." maxlength="100">
                        <button id="sendChatBtn" class="btn btn-secondary">Send</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- How to Play Screen -->
    <div id="howToPlayScreen" class="screen">
        <div class="tutorial-container">
            <h2>How to Play</h2>
            
            <div class="tutorial-content">
                <section>
                    <h3>üéØ Objective</h3>
                    <p>Be the first player to reach square 64 (the center of the board) to win!</p>
                </section>
                
                <section>
                    <h3>üéÆ Game Setup</h3>
                    <ol>
                        <li>Choose your character from 4 available options (Warrior, Mage, Rogue, Archer)</li>
                        <li>Enter your player name</li>
                        <li>Select Single Player or Multiplayer mode</li>
                        <li>For multiplayer: Host a game or join with a Room ID</li>
                    </ol>
                </section>
                
                <section>
                    <h3>üé≤ Gameplay</h3>
                    <ul>
                        <li>Players take turns rolling two dice</li>
                        <li>Move your character forward by the total number rolled</li>
                        <li>Navigate through the 64-square spiral board</li>
                        <li>Each turn has a 30-second time limit</li>
                    </ul>
                </section>
                
                <section>
                    <h3>üèÜ Winning</h3>
                    <p>The first player to reach or exceed square 64 wins the game!</p>
                </section>
                
                <section>
                    <h3>üë• Multiplayer Features</h3>
                    <ul>
                        <li>Up to 4 players can play together</li>
                        <li>Host creates a room and shares the Room ID</li>
                        <li>Other players join using the Room ID</li>
                        <li>Real-time chat during gameplay</li>
                    </ul>
                </section>
            </div>
            
            <button id="backFromTutorialBtn" class="btn btn-primary">Back to Menu</button>
        </div>
    </div>

    <!-- Question Modal -->
    <div id="questionModal" class="modal hidden">
        <div class="modal-content question-modal-content">
            <h2>ü§î Question</h2>
            <div id="questionText" class="question-text"></div>
            <div id="questionChoices" class="question-choices"></div>
            <div id="questionResult" class="question-result hidden">
                <div id="resultText"></div>
                <button id="continueBtn" class="btn btn-primary">Continue</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal hidden">
        <div class="modal-content">
            <h2>üèÜ Game Over!</h2>
            <p id="winnerMessage"></p>
            <button id="playAgainBtn" class="btn btn-primary">Play Again</button>
            <button id="backToMenuFromGameBtn" class="btn btn-secondary">Back to Menu</button>
        </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status">
        <span id="statusText">Connecting...</span>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/colyseus.js@^0.14.0/dist/colyseus.js"></script>
    <script src="js/game.js"></script>
    <script>
        // Global game instance
        const currentHostname = location.hostname;
        const game = new Game(`ws://${currentHostname}:2567`);
    </script>
    <script src="js/ui.js"></script>
    <script src="js/board.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
